<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Tic Tac Toe</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

<style>
body {
  margin: 0;
  background: #111;
  color: white;
  font-family: Arial, sans-serif;
  text-align: center;
}

h2 { margin: 10px 0; }

#modeSelect button, #controls button {
  padding: 10px 16px;
  margin: 6px;
  font-size: 14px;
  border: none;
  border-radius: 6px;
  background: #22c55e;
  color: black;
}

#scoreboard {
  margin: 8px 0;
  font-size: 16px;
}

#game {
  display: grid;
  grid-template-columns: repeat(3, 100px);
  gap: 6px;
  justify-content: center;
  margin: 10px auto;
}

.cell {
  width: 100px;
  height: 100px;
  background: #222;
  font-size: 50px;
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;
}
</style>
</head>

<body>

<h2>❌⭕ Tic Tac Toe</h2>

<div id="modeSelect">
  <button onclick="setMode('HUMAN')">Human vs Human</button>
  <button onclick="setMode('AI')">Human vs Computer</button>
</div>

<div id="scoreboard" style="display:none;">
  Player ❌: <span id="scoreX">0</span> |
  Player ⭕: <span id="scoreO">0</span>
</div>

<div id="game"></div>

<div id="controls">
  <button onclick="restart()">Restart</button>
</div>

<script>
let board, currentPlayer, mode;
let scoreX = 0, scoreO = 0;

const gameDiv = document.getElementById("game");

function setMode(m) {
  mode = m;
  if (mode === "HUMAN") {
    document.getElementById("scoreboard").style.display = "block";
  } else {
    document.getElementById("scoreboard").style.display = "none";
  }
  restart();
}

function restart() {
  board = Array(9).fill("");
  currentPlayer = "X";
  gameDiv.innerHTML = "";
  board.forEach((_, i) => {
    const cell = document.createElement("div");
    cell.className = "cell";
    cell.onclick = () => makeMove(i);
    gameDiv.appendChild(cell);
  });
}

function makeMove(i) {
  if (board[i] !== "") return;
  board[i] = currentPlayer;
  gameDiv.children[i].innerText = currentPlayer;

  if (checkWin(currentPlayer)) {
    alert(currentPlayer + " wins!");
    if (mode === "HUMAN") {
      if (currentPlayer === "X") scoreX++;
      else scoreO++;
      updateScore();
    }
    restart();
    return;
  }

  if (board.every(c => c !== "")) {
    alert("Draw!");
    restart();
    return;
  }

  currentPlayer = currentPlayer === "X" ? "O" : "X";

  if (mode === "AI" && currentPlayer === "O") {
    setTimeout(aiMove, 400);
  }
}

function aiMove() {
  let empty = board.map((v,i)=>v===""?i:null).filter(v=>v!==null);
  let move = empty[Math.floor(Math.random()*empty.length)];
  makeMove(move);
}

function checkWin(p) {
  const wins = [
    [0,1,2],[3,4,5],[6,7,8],
    [0,3,6],[1,4,7],[2,5,8],
    [0,4,8],[2,4,6]
  ];
  return wins.some(w => w.every(i => board[i] === p));
}

function updateScore() {
  document.getElementById("scoreX").innerText = scoreX;
  document.getElementById("scoreO").innerText = scoreO;
}

// Start default
setMode("HUMAN");
</script>

</body>
</html>
