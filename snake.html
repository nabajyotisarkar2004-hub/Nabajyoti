<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Snake Game</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="style.css">
</head>

<body>
<h1>üêç Snake Game</h1>
<p>Score: <span id="score">0</span></p>

<canvas id="game" width="320" height="320"></canvas>

<div class="controls">
  <button onclick="setDir('up')">‚¨Ü</button>
  <div>
    <button onclick="setDir('left')">‚¨Ö</button>
    <button onclick="setDir('right')">‚û°</button>
  </div>
  <button onclick="setDir('down')">‚¨á</button>
</div>

<button onclick="restart()">üîÑ Restart</button>
<button onclick="location.href='index.html'">üè† Home</button>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

const box = 20;
let snake = [{x: 160, y: 160}];
let dir = "RIGHT";
let food = randomFood();
let score = 0;
let SPEED = 160;   // ‚≠ê FIXED SPEED
let game;

function randomFood() {
  return {
    x: Math.floor(Math.random() * 16) * box,
    y: Math.floor(Math.random() * 16) * box
  };
}

function setDir(d) {
  if (d === "left" && dir !== "RIGHT") dir = "LEFT";
  if (d === "up" && dir !== "DOWN") dir = "UP";
  if (d === "right" && dir !== "LEFT") dir = "RIGHT";
  if (d === "down" && dir !== "UP") dir = "DOWN";
}

document.addEventListener("keydown", e => {
  if (e.key === "ArrowLeft") setDir("left");
  if (e.key === "ArrowUp") setDir("up");
  if (e.key === "ArrowRight") setDir("right");
  if (e.key === "ArrowDown") setDir("down");
});

function draw() {
  ctx.fillStyle = "black";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  // grid
  ctx.strokeStyle = "#222";
  for (let i=0;i<canvas.width;i+=box){
    ctx.strokeRect(i,0,box,canvas.height);
    ctx.strokeRect(0,i,canvas.width,box);
  }

  // snake
  ctx.fillStyle = "lime";
  snake.forEach((s,i)=>{
    ctx.fillRect(s.x,s.y,box,box);
    if(i===0){
      ctx.fillStyle="white";
      ctx.fillRect(s.x+5,s.y+5,4,4); // eyes
      ctx.fillRect(s.x+11,s.y+5,4,4);
      ctx.fillStyle="lime";
    }
  });

  // food
  ctx.fillStyle="red";
  ctx.fillRect(food.x,food.y,box,box);

  let headX = snake[0].x;
  let headY = snake[0].y;

  if (dir==="LEFT") headX -= box;
  if (dir==="UP") headY -= box;
  if (dir==="RIGHT") headX += box;
  if (dir==="DOWN") headY += box;

  if (headX===food.x && headY===food.y){
    score++;
    document.getElementById("score").innerText = score;
    food = randomFood();
  } else {
    snake.pop();
  }

  const newHead = {x: headX, y: headY};

  if (
    headX < 0 || headY < 0 ||
    headX >= canvas.width || headY >= canvas.height ||
    snake.some(s=>s.x===headX && s.y===headY)
  ){
    clearInterval(game);
    alert("Game Over üò¢");
  }

  snake.unshift(newHead);
}

function restart(){
  snake = [{x:160,y:160}];
  dir="RIGHT";
  score=0;
  document.getElementById("score").innerText = score;
  food=randomFood();
  clearInterval(game);
  game=setInterval(draw,SPEED);
}

game = setInterval(draw, SPEED);
</script>
</body>
</html>
